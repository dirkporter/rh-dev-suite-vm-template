apiVersion: v1
kind: Service
metadata:
  name: ${{ values.vmName }}-svc
  namespace: ${{ values.namespace }}
spec:
  selector:
    app: ${{ values.vmName }}
  ports:
    - port: 80
      targetPort: 80
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: ${{ values.vmName }}-route
  namespace: ${{ values.namespace }}
spec:
  # The FQDN is still auto-generated by OpenShift
  to:
    kind: Service
    name: ${{ values.vmName }}-svc
  port:
    targetPort: 80
  tls:
    termination: edge
    # insecureEdgeTerminationPolicy redirects HTTP to HTTPS automatically
    insecureEdgeTerminationPolicy: Redirect
